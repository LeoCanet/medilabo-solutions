server:
  port: 8888

spring:
  application:
    name: gateway-service
  cloud:
    gateway:
      routes:
        - id: patient-service-route
          uri: http://patient-service:8081
          predicates:
            - Path=/api/v1/patients/**
        - id: notes-service-route
          uri: http://notes-service:8082
          predicates:
            - Path=/api/v1/notes/**
        - id: assessment-service-route
          uri: http://assessment-service:8083
          predicates:
            - Path=/api/v1/assess/**
    compatibility-verifier:
      enabled: false

management:
  endpoints:
    web:
      exposure:
        include: "*"

logging:
  level:
    root: INFO
    com.mediscreen.gateway: INFO
    org.springframework.cloud.gateway: DEBUG
    org.springframework.security: DEBUG
    reactor.netty: DEBUG

# Configuration Basic Auth différenciée par service
mediscreen:
  auth:
    patient:
      username: ${AUTH_PATIENT_USERNAME}
      password: ${AUTH_PATIENT_PASSWORD}
    notes:
      username: ${AUTH_NOTES_USERNAME}
      password: ${AUTH_NOTES_PASSWORD}
    assessment:
      username: ${AUTH_ASSESSMENT_USERNAME}
      password: ${AUTH_ASSESSMENT_PASSWORD}
  # URIs des microservices backend (variabilisées pour tests et environnements)
  services:
    patient:
      uri: ${PATIENT_SERVICE_URI:http://patient-service:8081}
    notes:
      uri: ${NOTES_SERVICE_URI:http://notes-service:8082}
    assessment:
      uri: ${ASSESSMENT_SERVICE_URI:http://assessment-service:8083}

